# Environment Variables

ℹ️ Feel free to adjust your environment variables to taste.
This application recognizes the following environment variables:

| Name                                      | Description                                                                                                                                                                                                                                                         |                                                     Range/Type                                                      |              Required?               |           Default           |
| ----------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-----------------------------------------------------------------------------------------------------------------: | :----------------------------------: | :-------------------------: | --- |
| `API_BODY_JSON_LIMIT`                     | Api json body size limit in string (some examples: 100kb or 5mb or etc)                                                                                                                                                                                             |                                                       string                                                        |                                      |             1mb             |
| `API_PORT`                                | HTTP port that the application listens on                                                                                                                                                                                                                           |                                                    1025 - 65535                                                     |                                      |            3000             |
| `API_TIMEOUT_MS`                          | Overall API timeout limit in milliseconds. This is the maximum time allowed for any API request to complete. Any `HTTP_RESPONSE_TIMEOUT_MS` value must be less than this value                                                                                      |                                                         > 0                                                         |                                      |            30000            |
| `ASSET_EXPIRATION_INTERVAL_SECONDS`       | Number of seconds to keep completed asset entries in the cache before expiring them                                                                                                                                                                                 |                                                         > 0                                                         |                  Y                   |                             |
| `ASSET_UPLOAD_VERIFICATION_DELAY_SECONDS` | Base delay in seconds used for exponential backoff while waiting for uploaded assets to be verified available before publishing a content notice                                                                                                                    |                                                        >= 0                                                         |                  Y                   |                             |
| `BATCH_INTERVAL_SECONDS`                  | Number of seconds between publishing batches. This is so that the service waits a reasonable amount of time for additional content to publish before submitting a batch--it represents a trade-off between maximum batch fullness and minimal wait time for content |                                                         > 0                                                         |                  Y                   |                             |
| `BATCH_MAX_COUNT`                         | Maximum number of items that can be submitted in a single batch                                                                                                                                                                                                     |                                                         > 0                                                         |                  Y                   |                             |
| `CACHE_KEY_PREFIX`                        | Prefix to use for Redis cache keys                                                                                                                                                                                                                                  |                                                       string                                                        |                  Y                   |                             |
| `CAPACITY_LIMIT`                          | Maximum amount of provider capacity this app is allowed to use (per epoch) type: 'percentage' 'amount' value: number (may be percentage, ie '80', or absolute amount of capacity)                                                                                   | JSON [(example)](https://github.com/ProjectLibertyLabs/gateway/blob/main/env-files/content-publishing.template.env) |                  Y                   |                             |
| `FILE_UPLOAD_COUNT_LIMIT`                 | Max number of files to be able to upload at the same time via one upload call                                                                                                                                                                                       |                                                         > 0                                                         |                  Y                   |                             |
| `FILE_UPLOAD_MAX_SIZE_IN_BYTES`           | Maximum size (in bytes) allowed for each uploaded file. This limit applies to individual files in both single and batch uploads.                                                                                                                                    |                                                         > 0                                                         |                  Y                   |                             |     |
| `FREQUENCY_API_WS_URL`                    | Blockchain API Websocket URL                                                                                                                                                                                                                                        |                                                     ws(s): URL                                                      |                  Y                   |                             |
| `FREQUENCY_TIMEOUT_SECS`                  | Frequency chain connection timeout limit; app will terminate if disconnected longer                                                                                                                                                                                 |                                                       integer                                                       |                                      |             10              |
| `HTTP_RESPONSE_TIMEOUT_MS`                | Timeout in milliseconds to wait for a response as part of a request to an HTTP endpoint. Must be less than `API_TIMEOUT_MS`                                                                                                                                         |                                              > 0 and < API_TIMEOUT_MS                                               |                                      |            3000             |
| `IPFS_BASIC_AUTH_SECRET`                  | If using Infura, put auth token here, or leave blank for Kubo RPC                                                                                                                                                                                                   |                                                       string                                                        |                                      |            blank            |
| `IPFS_BASIC_AUTH_USER`                    | If using Infura, put Project ID here, or leave blank for Kubo RPC                                                                                                                                                                                                   |                                                       string                                                        |                                      |            blank            |
| `IPFS_ENDPOINT`                           | URL to IPFS endpoint                                                                                                                                                                                                                                                |                                                         URL                                                         |                  Y                   |                             |
| `IPFS_GATEWAY_URL`                        | IPFS gateway URL '[CID]' is a token that will be replaced with an actual content ID                                                                                                                                                                                 |                                                    URL template                                                     |                  Y                   |                             |
| `PRETTY`                                  | Whether logs should be pretty-printed on one line or multiple lines, or plain JSON                                                                                                                                                                                  |                                           `true` \| `false` \| `compact`                                            |                  N                   |           `false`           |
| `PROVIDER_ACCOUNT_SEED_PHRASE`            | Seed phrase or URI or Ethereum private key that is used for provider MSA control key                                                                                                                                                                                |                                                       string                                                        |                  Y                   |                             |
| `PROVIDER_ID`                             | Provider MSA Id                                                                                                                                                                                                                                                     |                                                       integer                                                       |                  Y                   |                             |
| `RATE_LIMIT_TTL`                          | Rate limiting time window in milliseconds. Requests are limited within this time window                                                                                                                                                                             |                                                         > 0                                                         |                                      |            60000            |
| `RATE_LIMIT_MAX_REQUESTS`                 | Maximum number of requests allowed per time window (TTL)                                                                                                                                                                                                            |                                                         > 0                                                         |                                      |             100             |
| `RATE_LIMIT_SKIP_SUCCESS`                 | Whether to skip counting successful requests (2xx status codes) towards the rate limit                                                                                                                                                                              |                                                       boolean                                                       |                                      |            false            |
| `RATE_LIMIT_SKIP_FAILED`                  | Whether to skip counting failed requests (4xx/5xx status codes) towards the rate limit                                                                                                                                                                              |                                                       boolean                                                       |                                      |            false            |
| `RATE_LIMIT_BLOCK_ON_EXCEEDED`            | Whether to block requests when rate limit is exceeded (true) or just log them (false)                                                                                                                                                                               |                                                       boolean                                                       |                                      |            true             |
| `RATE_LIMIT_KEY_PREFIX`                   | Redis key prefix for rate limiting storage. Used to namespace rate limiting data in Redis                                                                                                                                                                           |                                                       string                                                        |                                      | content-publishing:throttle |
| `REDIS_OPTIONS`                           | Additional Redis options.<br/>See [ioredis configuration](https://ioredis.readthedocs.io/en/latest/API/#new-redisport-host-options)                                                                                                                                 |                                                     JSON string                                                     |   Y<br/>(either this or REDIS_URL)   | '{"commandTimeout":10000}'  |
| `REDIS_URL`                               | Connection URL for Redis                                                                                                                                                                                                                                            |                                                         URL                                                         | Y<br/>(either this or REDIS_OPTIONS) |                             |
